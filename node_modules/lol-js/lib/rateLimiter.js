// Generated by CoffeeScript 1.9.0
(function() {
  var LolRateLimiter, RateLimiter;

  RateLimiter = require('limiter').RateLimiter;

  module.exports = LolRateLimiter = (function() {
    function LolRateLimiter(limits, _at_Promise) {
      var l, _i, _len;
      this.Promise = _at_Promise;
      this.limiters = [];
      for (_i = 0, _len = limits.length; _i < _len; _i++) {
        l = limits[_i];
        this.limiters.push(new RateLimiter(l.limit, l.time * 1000));
      }
    }

    LolRateLimiter.prototype.wait = function() {
      return this.Promise.all(this.limiters.map((function(_this) {
        return function(limiter, index) {
          return new _this.Promise(function(resolve, reject) {
            return limiter.removeTokens(1, function(err) {
              if (err != null) {
                return reject(err);
              }
              return resolve();
            });
          });
        };
      })(this)));
    };

    return LolRateLimiter;

  })();

}).call(this);
